
<!DOCTYPE html>
		<html>
		<head>
			<meta charset="utf-8">
			<meta http-equiv="X-UA-Compatible" content="IE=edge">
			<meta name="viewport" content="width=device-width, initial-scale=1">
			<style>
				body {
					margin: 0!important;
				}
				#video {
					width: 100%;
					height: 100%;
				}
				.jw-icon-fullscreen, .jw-icon-pip {display: none!important;}
				.logo-on-player {
					position: absolute;
					width: 100px;
					right: 20px;
					top: 20px;
				}
                .video-wrapper {
					width: 100%;
					height: 100%;
                    position: relative;
                }
                #video-note-english-commentary {
					position: absolute;
					bottom: 10%;
					left: 50%;
					transform: translate(-50%, 0);
					font-size: 4.5vmin;
					text-align: center;
					color: #000;
					width: 100%;
                }
				#video-note-english-commentary > span {
					background: #fff;
					padding: 5px;
				}
				.jw-icon-settings{
					background-image: url('https://storage.n2olabs.pro/quality/auto.png');
					background-repeat: no-repeat;
					background-size: contain;
					max-height: 24px;
				}
				.jw-icon-settings svg{
					display: none;
				}

				[button="btn-maycdn"] {
					width: 100px!important;
					margin-right: 50px!important;
				}

				[button="btn-maycdn"] > .jw-icon {
					width: 100%!important;
				}
			</style>
			<!-- Global site tag (gtag.js) - Google Analytics -->
			<script async src="https://www.googletagmanager.com/gtag/js?id=G-C6D3ZQVKHG"></script>
			<script>
				setTimeout(function () {
					window.dataLayer = window.dataLayer || [];
					function gtag(){dataLayer.push(arguments);}
					gtag('js', new Date());
		
					gtag('config', 'G-C6D3ZQVKHG');
				}, 5000);
			</script>
		</head>

		<body>
		<div class="video-wrapper">
			<div id="video"></div>
			<div id="video-note-english-commentary">
				<span>
					English commentary will be available when the match kicks off.
				</span>
			</div>
		</div>

		<script src="https://content.jwplatform.com/libraries/KB5zFt7A.js"></script>
		<script src="https://ssl.p.jwpcdn.com/player/v/8.27.1/provider.hlsjs.js"></script>
		<script src="https://ssl.p.jwpcdn.com/player/v/8.27.1/provider.cast.js"></script>
		<script type="text/javascript"> jwplayer.key = "eNFaXCjyURVoCCGiHp7HTQ3hDhE/AfL0g8VE1fRbL84=";</script>
		<script type="text/javascript" src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
		<script>
			var m3u8 = 'https://xiaolin.live/wowhaha.php?m3u8=https%3A%2F%2Flivecdn-iptv001.rumsport.com%2Flivetv%2F52440_hd%2Findex.m3u8&id=3021&token=4b57b63b9886631d71597064f9b357ddd3627a31.false.1741543200-YhNuIg7S3Fj7RMXoa1TeqVj8%2FDBjG21C9C9bR5hxAqE%3D&ver=2902579&parent=amzstream.tv&is_vip=false&image=https%3A%2F%2Fimg.amzstream.tv%2Fstatic%2Fcommon%2Fimg%2Fmatchs%2F1629427812.jpg&matchdate=1741543200';
			let domainM3U8 = (new URL(m3u8));
			var player = jwplayer('video');

			// setInterval(() => {
			//     eval('debugger')
			// }, 2000)
			const expiredInMillis = -6109414
			console.log('expiredInMillis: '+expiredInMillis);

			if (expiredInMillis > 0) {
				setTimeout(function () {
					document.getElementById('video-note-english-commentary').style.display = 'none';
				}, expiredInMillis);
			} else {
				document.getElementById('video-note-english-commentary').style.display = 'none';
			}
			addEventListener("message", function (event) {
				try {
					const dataParse = JSON.parse(event.data);
					if (dataParse.event == 'banner-on-player') {
						$('.jw-wrapper').append('<div class="banner-on-player">' + dataParse.data.html + '</div>');
					}
					if (dataParse.event == 'logo-on-player') {
						$('.jw-wrapper').append('<div class="logo-on-player">' + dataParse.data.html + '</div>');
					}
					if (dataParse.event == 'click-player') {
						if (player != undefined) {
							if (jwplayer().getState() != 'playing') {
								player.play();
							} else {
								player.pause();
							}
						}
					}
					if (dataParse.event == 'player-unmute') {
						if (player != undefined && player.getMute() === true) {
							player.setMute(false);

							setTimeout(() => {
								if (player.getState() != 'playing') {
									player.play();
								}
							}, 500)
						}
					}
					if (dataParse.event == 'capture-player') {
						html2canvas(document.querySelector(".video-wrapper")).then(canvas => {
							let dataURL = canvas.toDataURL();
							sendEventToParent('response-capture-player', { image: dataURL});
						});
					}
				} catch (e) {
					console.log(e);
				}
			}, false);
		
			window.addEventListener('load', function () {
				/*if (navigator.userAgent.match('Intel Mac OS') == null) {
		
				}*/
				//jwplayer_hls_provider.attach();
				// if(Hls.isSupported()) {
				player.setup({
					file: m3u8,
					type: 'hls',
					autostart: true,
					mute: true,
					width: "100%",
					height: "100vh",
					pipIcon: "disabled"
				});

				if (location.href.match('fake-fullscreen')) {
					player.addButton(
						"https://admin.ttbd.live/images/fullscreen.svg",
						"Full screen",
						function () {
							sendEventToParent('alert_message', {
								'message': 'Fullscreen mode is enabled for VIP member only',
								'icon': 'error'
							});
						},
						"btn-fullscreen-fake"
					);
				}

				// player.addButton(
				// 	"https://admin.ttbd.live/images/maycdn3.png?v=1",
				// 	"MayCDN",
				// 	function () {
				// 		window.open("https://maycdn.com", "_blank");
				// 	},
				// 	"btn-maycdn"
				// );

				player.on('ready', function() {
					if (player.getMute() === true) {
						sendEventToParent('player-is-muted', true);
					}
				})

				player.on('mute', function() {
					if (player.getMute() === true) {
						sendEventToParent('player-manual-mute', true);
					} else {
						sendEventToParent('player-manual-unmute', true);
					}
				})

				player.on('error', function(e) {
					setTimeout(function() {
						sendEventToParent('error-player', e);
					}, 3000);
				})

				player.on('levelsChanged', function () {
					document.getElementsByClassName("jw-icon-settings")[0].style.backgroundImage = 'url(https://storage.n2olabs.pro/quality/all-anim.gif)';
				});
				player.on('visualQuality', function (level,label,reason) {
					if(level.level){
						level = level.level;
						var label = level.label.toLowerCase();
						document.getElementsByClassName("jw-icon-settings")[0].style.backgroundImage = 'url(https://storage.n2olabs.pro/quality/' + label+".png" + ')';
					}
				});

				setTimeout(function () {player.play();}, 1000);
				setTimeout(function () {player.play();}, 2000);
				setTimeout(function () {player.play();}, 3000);
				setTimeout(function () {player.play();}, 4000);
				setTimeout(function () {player.play();}, 5000);
				// }
			})

			function sendEventToParent(event, data) {
				if (parent) {
					parent.postMessage(
						JSON.stringify({
							event,
							data,
						}),
						'*'
					)
				}
			}
		</script>
		</body>
		</html>